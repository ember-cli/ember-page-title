{"version":3,"file":"page-title.js","sources":["../../src/helpers/page-title.ts"],"sourcesContent":["import { service } from '@ember/service';\nimport Helper from '@ember/component/helper';\nimport { guidFor } from '@ember/object/internals';\n\nimport type Owner from '@ember/owner';\nimport type PageTitleService from '../services/page-title.ts';\nimport type { PageTitleToken } from '../private-types.ts';\n\nexport type PageTitleHelperOptions = Pick<\n  PageTitleToken,\n  'prepend' | 'front' | 'replace' | 'separator'\n>;\n\ninterface Signature {\n  Args: {\n    Positional: string[];\n    Named: PageTitleHelperOptions;\n  };\n  Return: void;\n}\n\n/**\n * `{{pageTitle}}` helper used to set the title of the current route context.\n *\n * ```gjs\n * import { pageTitle } from 'ember-page-title';\n *\n * <template>\n *   {{pageTitle \"the text to set the tab's title to\"}}\n *   {{pageTitle \\@model.post.title}}\n * </template>\n * ```\n */\nexport default class PageTitle extends Helper<Signature> {\n  @service('page-title') declare tokens: PageTitleService;\n\n  tokenId = guidFor(this);\n\n  constructor(owner: Owner) {\n    super(owner);\n    this.tokens.push({ id: this.tokenId });\n  }\n\n  compute(params: string[], userOptions: PageTitleHelperOptions) {\n    const options = {\n      ...userOptions,\n      id: this.tokenId,\n      title: params.join(''),\n    };\n\n    this.tokens.push(options);\n    this.tokens.scheduleTitleUpdate();\n    // We must return an empty value here because otherwise\n    // invoking the pageTitle helper will render something\n    // in the component it's used in, and we don't want that.\n    //\n    // pageTitle is a side-effecting helper.\n    // We *synchronize* the document.title with our internal state.\n    return '';\n  }\n\n  willDestroy() {\n    super.willDestroy();\n    this.tokens.remove(this.tokenId);\n    this.tokens.scheduleTitleUpdate();\n  }\n}\n"],"names":["PageTitle","_dec","service","_class","Helper","constructor","owner","_initializerDefineProperty","_descriptor","_defineProperty","guidFor","tokens","push","id","tokenId","compute","params","userOptions","options","title","join","scheduleTitleUpdate","willDestroy","remove","_applyDecoratedDescriptor","prototype","configurable","enumerable","writable","initializer"],"mappings":";;;;;;AAqBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXA,IAYqBA,SAAS,IAAAC,IAAA,GAC3BC,OAAO,CAAC,YAAY,CAAC,GAAAC,MAAA,GADT,MAAMH,SAAS,SAASI,MAAM,CAAY;EAKvDC,WAAWA,CAACC,KAAY,EAAE;IACxB,KAAK,CAACA,KAAK,CAAC,CAAA;AAACC,IAAAA,0BAAA,iBAAAC,WAAA,EAAA,IAAA,CAAA,CAAA;AAAAC,IAAAA,eAAA,CAHLC,IAAAA,EAAAA,SAAAA,EAAAA,OAAO,CAAC,IAAI,CAAC,CAAA,CAAA;AAIrB,IAAA,IAAI,CAACC,MAAM,CAACC,IAAI,CAAC;MAAEC,EAAE,EAAE,IAAI,CAACC,OAAAA;AAAQ,KAAC,CAAC,CAAA;AACxC,GAAA;AAEAC,EAAAA,OAAOA,CAACC,MAAgB,EAAEC,WAAmC,EAAE;AAC7D,IAAA,MAAMC,OAAO,GAAG;AACd,MAAA,GAAGD,WAAW;MACdJ,EAAE,EAAE,IAAI,CAACC,OAAO;AAChBK,MAAAA,KAAK,EAAEH,MAAM,CAACI,IAAI,CAAC,EAAE,CAAA;KACtB,CAAA;AAED,IAAA,IAAI,CAACT,MAAM,CAACC,IAAI,CAACM,OAAO,CAAC,CAAA;AACzB,IAAA,IAAI,CAACP,MAAM,CAACU,mBAAmB,EAAE,CAAA;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,IAAA,OAAO,EAAE,CAAA;AACX,GAAA;AAEAC,EAAAA,WAAWA,GAAG;IACZ,KAAK,CAACA,WAAW,EAAE,CAAA;IACnB,IAAI,CAACX,MAAM,CAACY,MAAM,CAAC,IAAI,CAACT,OAAO,CAAC,CAAA;AAChC,IAAA,IAAI,CAACH,MAAM,CAACU,mBAAmB,EAAE,CAAA;AACnC,GAAA;AACF,CAAC,GAAAb,WAAA,GAAAgB,yBAAA,CAAArB,MAAA,CAAAsB,SAAA,EAAA,QAAA,EAAA,CAAAxB,IAAA,CAAA,EAAA;EAAAyB,YAAA,EAAA,IAAA;EAAAC,UAAA,EAAA,IAAA;EAAAC,QAAA,EAAA,IAAA;EAAAC,WAAA,EAAA,IAAA;AAAA,CAAA,CAAA,GAAA1B,MAAA,CAAA;;;;"}